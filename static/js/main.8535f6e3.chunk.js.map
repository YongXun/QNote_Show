{"version":3,"sources":["pages/userpad.jsx","pages/notepad.jsx","pages/mottopad.jsx","pages/datepad.jsx","App.jsx","index.js"],"names":["message","config","top","duration","maxCount","rtl","getContainer","document","querySelector","head","UserPad","props","componentWillMount","a","token","localStorage","getItem","axios","post","then","res","data","ok","setState","online","user","JSON","parse","sessionStorage","noteList","length","get","params","setItem","stringify","note","avatarUrl","console","log","hideShowIn","catch","err","removeItem","noteNum","completeNoteNum","currentNoteNum","giveUpNoteNum","showSignIn","anime","targets","left","showSignUp","right","hideShowUp","showModal","visible","handleOk","e","signout","handleCancel","signin","signinCheck","email","state","signin_email","password","signin_password","success","info","signup","signupCheck","signup_email","username","signup_username","signup_pwd","verification","signup_valid","setWait","wait","sendEmail","test","valid","innerHTML","easing","round","setTimeout","bind","showUpLoad","zIndex","hideUpLoad","avatarChange","fileReader","FileReader","avatar","files","type","size","readAsDataURL","onload","setAttribute","result","formData","FormData","xhr","XMLHttpRequest","append","open","setRequestHeader","status","send","signup_cpwd","id","loading","upLoading","imageUrl","this","pwd","cpwd","rotate","value","file","isJpgOrPng","error","isLt2M","LoadingOutlined","PlusOutlined","className","onClick","title","onOk","onCancel","width","centered","okText","cancelText","src","alt","height","htmlFor","name","onChange","refresh","spinning","gutter","span","placeholder","target","React","Component","NotePad","handleChange","handleClick","noteContent","noteRemark","noteID","push","done","gNote","ID","forEach","index","splice","noteList2","dNote","cNote","map","key","MottoPad","getMotto","motto","copy","tag","createElement","hitokoto","getElementById","appendChild","select","execCommand","remove","from_who","from","color","Math","random","style","backgroundColor","rom_who","DatePad","count","begindate","Date","replace","current","myDate","getFullYear","getMonth","getDate","startDate","getTime","endDate","parseInt","countString","past","years","start","startYear","startMonth","startDay","currentYear","currentMonth","currentDay","months","abs","floor","middleDate","setFullYear","setMonth","days","string","titleChange","input","date","dateChange","dateString","submit","check","memorialOnLine","memorial","showToday","App","to","exact","path","component","ReactDOM","render"],"mappings":"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","file":"static/js/main.8535f6e3.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Avatar , message , Modal , Statistic, Row , Col , Progress , Button , Input ,Spin , Upload} from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport anime from 'animejs';\r\nimport axios from 'axios';\r\nimport '../css/userpad.scss';\r\nimport 'antd/dist/antd.css';\r\n\r\nmessage.config({\r\n    top:100,\r\n    duration: 1,\r\n    maxCount: 1,\r\n    rtl: false,\r\n    getContainer:() => document.querySelector('.App') || document.head\r\n});\r\n\r\nclass UserPad extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            online:false,\r\n            avatarUrl:'',\r\n            signin_email:'',\r\n            signin_password:'',\r\n            signup_email:'',\r\n            signup_username:'',\r\n            signup_pwd:'',\r\n            signup_cpwd:'',\r\n            signup_valid:'',\r\n            visible:false,\r\n            wait:false,\r\n            user:{\r\n                id:'string',\r\n                username:'string',\r\n                email:'string',\r\n                noteNum:0,\r\n                completeNoteNum:0,\r\n                currentNoteNum:0,\r\n                giveUpNoteNum:0,\r\n                avatarUrl:''\r\n            },\r\n            loading:false,\r\n            upLoading:false,\r\n            imageUrl:'',\r\n        }\r\n    }\r\n\r\n    componentWillMount = async () => {\r\n        let token = localStorage.getItem('token');\r\n        if(token !== null){\r\n            await axios.post(`https://qnote.qfstudio.net/api/authToken`,{\r\n            token\r\n            }).then(res=>{\r\n                //有效token\r\n                if(res.data.ok){\r\n                    this.setState({\r\n                        online:true\r\n                    })\r\n                    let user = JSON.parse(sessionStorage.getItem('user') || '[]');\r\n                    let noteList = JSON.parse(sessionStorage.getItem('noteList') || '[]');\r\n                    if(user.length === 0){\r\n                        axios.get(`https://qnote.qfstudio.net/api/user/getMessage`,{\r\n                            params:{\r\n                                token:localStorage.getItem('token')\r\n                            }\r\n                        })\r\n                        .then(res=>{\r\n                            this.setState({\r\n                                user:res.data.user\r\n                            })\r\n                            sessionStorage.setItem('user',JSON.stringify(res.data.user));\r\n                            sessionStorage.setItem('noteList',JSON.stringify(res.data.note));\r\n                            this.setState({\r\n                                user:res.data.user,\r\n                                noteList:res.data.noteList\r\n                            })\r\n                            // 查看是否有头像\r\n                            if(res.data.user.avatarUrl){\r\n                                this.setState({\r\n                                    avatarUrl:`https://qnote.qfstudio.net${res.data.user.avatarUrl}`\r\n                                })\r\n                            }\r\n                            console.log()\r\n                            //隐藏登录框\r\n                            this.hideShowIn();\r\n                        })\r\n                        .catch((err)=>{\r\n                            console.log(err);\r\n                        })\r\n                    }\r\n                    else{\r\n                        console.log(user)\r\n                        console.log(user.avatarUrl)\r\n                        if(user.avatarUrl){\r\n                            this.setState({\r\n                                avatarUrl:`https://qnote.qfstudio.net${user.avatarUrl}`\r\n                            })\r\n                        }\r\n                        this.setState({\r\n                            user:user,\r\n                            noteList:noteList\r\n                        })\r\n                    }\r\n                }\r\n                // 无效token,本地用户\r\n                else{\r\n                    localStorage.removeItem('token');\r\n                    let user = JSON.parse(localStorage.getItem('user'));\r\n                    if(user === null){\r\n                        user = {\r\n                            noteNum:0,\r\n                            completeNoteNum:0,\r\n                            currentNoteNum:0,\r\n                            giveUpNoteNum:0\r\n                        };\r\n                        localStorage.setItem('user',JSON.stringify(user));\r\n                    }\r\n                    this.setState({\r\n                        user:user\r\n                    });\r\n                }\r\n            })\r\n        }\r\n        else{\r\n            let user = JSON.parse(localStorage.getItem('user'));\r\n            if(user === null){\r\n                user = {\r\n                    noteNum:0,\r\n                    completeNoteNum:0,\r\n                    currentNoteNum:0,\r\n                    giveUpNoteNum:0\r\n                };\r\n                localStorage.setItem('user',JSON.stringify(user));\r\n            }\r\n            this.setState({\r\n                user:user\r\n            });\r\n        }\r\n    }\r\n\r\n    // 显示登录框\r\n    showSignIn = () => {\r\n        anime({\r\n            targets:'.signinpad',\r\n            left:'0'\r\n        })\r\n    }\r\n\r\n    //显示注册框\r\n    showSignUp = () => {\r\n        anime({\r\n            targets:'.signuppad',\r\n            right:'0'\r\n        })\r\n    }\r\n    \r\n    //隐藏登录框\r\n    hideShowIn = () =>{\r\n        anime({\r\n            targets:'.signinpad',\r\n            left:'-100%'\r\n        })\r\n    }\r\n\r\n    //隐藏注册框\r\n    hideShowUp = () =>{\r\n        anime({\r\n            targets:'.signuppad',\r\n            right:'-100%'\r\n        })\r\n    }\r\n\r\n    //是否退出\r\n    showModal = () => {\r\n        this.setState({\r\n            visible:true\r\n        })\r\n    };\r\n\r\n    //确定退出\r\n    handleOk = (e) => {\r\n        console.log(typeof e)\r\n        this.signout();\r\n        this.setState({\r\n            visible:false\r\n        })\r\n        // setVisible(false);\r\n    };\r\n\r\n    //取消退出\r\n    handleCancel = (e) => {\r\n        this.setState({\r\n            visible:false\r\n        })\r\n    };\r\n\r\n    signinCheck(){\r\n        let reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n        let email = this.state.signin_email;\r\n        let pwd = this.state.signin_password;\r\n        if(!reg.test(email)){\r\n            message.info('请输入正确格式的邮箱！')\r\n            return false\r\n        }\r\n        if(pwd.length<6 || pwd.length>10){\r\n            message.info('密码长度不合法');\r\n            return false\r\n        }\r\n        return true;\r\n    }\r\n\r\n    signin = async () => {\r\n        if(!this.signinCheck()){return};\r\n        let email= this.state.signin_email;\r\n        let password= this.state.signin_password;\r\n        await axios.post(`https://qnote.qfstudio.net/api/signin`,{\r\n            email,\r\n            password,\r\n        })\r\n        .then(res=>{\r\n            localStorage.setItem('token',res.data.token);\r\n            this.setState({\r\n                online:true\r\n            })\r\n            message.success('登录成功');\r\n        })\r\n        .catch((err)=>{\r\n            message.info('登录失败，请检查您的邮箱与密码');\r\n            return\r\n        })\r\n        this.setState({\r\n            signin_email:'',\r\n            signin_password:''\r\n        })\r\n        axios.get(`https://qnote.qfstudio.net/api/user/getMessage`,{\r\n            params:{\r\n                token:localStorage.getItem('token')\r\n            }\r\n        })\r\n        .then(res=>{\r\n            this.setState({\r\n                user:res.data.user\r\n            })\r\n            sessionStorage.setItem('user',JSON.stringify(res.data.user));\r\n            sessionStorage.setItem('noteList',JSON.stringify(res.data.note));\r\n            if(res.data.user.avatarUrl){\r\n                this.setState({\r\n                    avatarUrl:`https://qnote.qfstudio.net${res.data.user.avatarUrl}`\r\n                })\r\n            }\r\n            //隐藏登录框\r\n            this.hideShowIn();\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    signupCheck(){\r\n        let reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n        let pwd = this.state.signup_pwd;\r\n        let cpwd = this.state.signup_cpwd;\r\n        let valid = this.state.signup_valid;\r\n        if(!reg.test(this.state.signup_email)){\r\n            message.info('请输入正确格式的邮箱')\r\n            return false\r\n        }\r\n        if(pwd.length < 6 || pwd.length > 10){\r\n            message.info('密码长度需在6与10之间')\r\n            return false\r\n        }\r\n        if(cpwd !== pwd){\r\n            message.info('两次密码不一致')\r\n            return false\r\n        }\r\n        if(!valid){\r\n            message.info('请输入您的邮箱验证码')\r\n            return false\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // 注册\r\n    signup = async () => {\r\n        if(!this.signupCheck()){return;}\r\n        await axios.post(`https://qnote.qfstudio.net/api/register`,{\r\n            email:this.state.signup_email,\r\n            username:this.state.signup_username,\r\n            password:this.state.signup_pwd,\r\n            verification:this.state.signup_valid\r\n        })\r\n        .then((res)=>{\r\n            message.success('注册成功')\r\n        })\r\n        .catch(err=>{\r\n            console.log(this.state.signup_email)\r\n            console.log(this.state.signup_username)\r\n            console.log(this.state.signup_pwd)\r\n            console.log(this.state.signup_valid)\r\n            message.info('注册失败，请检查您的信息是否正确');\r\n        })\r\n    }\r\n\r\n    setWait = (wait) => {\r\n        console.log('转换')\r\n        this.setState({\r\n            wait\r\n        })\r\n    }\r\n\r\n    //发送邮件\r\n    sendEmail = async () => {\r\n        if(this.state.wait){\r\n            message.info('请等待')\r\n        }\r\n        else{\r\n            let reg = /^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/;\r\n            if(reg.test(this.state.signup_email)){              \r\n                axios.post('https://qnote.qfstudio.net/api/sendEmail',{\r\n                    email:this.state.signup_email\r\n                })\r\n                .then(res=>{\r\n                    if(res.data.valid){\r\n                        message.success('发送成功！');\r\n                        this.setWait(true);\r\n                        anime({\r\n                            targets:'.count',\r\n                            innerHTML:[60,0],\r\n                            easing:'linear',\r\n                            round:1,\r\n                            duration:60000\r\n                        })\r\n                        setTimeout(this.setWait.bind(this,false), 60000);\r\n                    }\r\n                    else{\r\n                        message.info('发送失败！')\r\n                    }\r\n                })\r\n            }\r\n            else{\r\n                message.info('请输入正确格式的邮箱！');\r\n            }\r\n        }\r\n    }\r\n\r\n    //退出登录\r\n    signout = () => {\r\n        localStorage.removeItem('token');\r\n        this.setState({\r\n            online:false\r\n        })\r\n    }\r\n\r\n    //刷新数据\r\n    async refresh(){\r\n        this.setState({\r\n            loading:true\r\n        })\r\n        anime({\r\n            targets:'.refresh',\r\n            rotate:[\r\n                {value:'360deg',duration:10000,easing: 'linear'},\r\n                {value:'0deg',},\r\n            ]\r\n        })\r\n        switch(this.state.online){\r\n            case true:\r\n                axios.get(`https://qnote.qfstudio.net/api/user/getMessage`,{\r\n                    params:{\r\n                        token:localStorage.getItem('token')\r\n                    }\r\n                })\r\n                .then(res=>{\r\n                    this.setState({\r\n                        user:res.data.user\r\n                    })\r\n                    sessionStorage.setItem('user',JSON.stringify(res.data.user));\r\n                    sessionStorage.setItem('noteList',JSON.stringify(res.data.note));\r\n                    message.success('刷新成功！');\r\n                    this.setState({\r\n                        loading:false\r\n                    })\r\n                    //隐藏登录框\r\n                })\r\n                .catch((err)=>{\r\n                    console.log(err);\r\n                })\r\n                break;\r\n            default:\r\n                let user = JSON.parse(localStorage.getItem('user'));\r\n                if(user === null){\r\n                    user = {\r\n                        noteNum:0,\r\n                        completeNoteNum:0,\r\n                        currentNoteNum:0,\r\n                        giveUpNoteNum:0\r\n                    };\r\n                    localStorage.setItem('user',JSON.stringify(user));\r\n                }\r\n                message.success('刷新成功！');\r\n                this.setState({\r\n                    user:user,\r\n                    loading:false\r\n                })\r\n                break;\r\n        }\r\n    }\r\n    \r\n    //显示上传头像按钮\r\n    showUpLoad = () => {\r\n        anime({\r\n            targets:'.ant-avatar',\r\n            zIndex:'-999'\r\n        })\r\n    }\r\n\r\n    //隐藏上传头像按钮\r\n    hideUpLoad = () => {\r\n        anime({\r\n            targets:'.ant-avatar',\r\n            zIndex:'2'\r\n        })\r\n    }\r\n\r\n    // \r\n    avatarChange = async (info)=> {\r\n        if(!this.state.online){message.info('暂不支持离线用户上传头像！');return;}\r\n        const token = localStorage.getItem('token');\r\n        const fileReader = new FileReader();\r\n        const avatar = document.querySelector('#avatar-loader').files[0];\r\n        // console.log(avatar)\r\n        if(avatar.type !== 'image/jpeg' && avatar.type !== 'image/png' && avatar.type !== 'image/jpg'){\r\n            console.log(avatar.type)\r\n            message.info('仅支持JPEG和PNG格式的图片！');\r\n            return;\r\n        }\r\n        const isLt2M = avatar.size / 1024 / 1024 < 2;\r\n        if (!isLt2M) {\r\n          message.info('图片大小不可大于2MB！');\r\n          return;\r\n        }\r\n        fileReader.readAsDataURL(avatar);\r\n        // 头像修改\r\n        fileReader.onload = function () {\r\n            document.querySelector('#avatar').setAttribute('src',fileReader.result)\r\n        };\r\n        //头像上传\r\n        const formData = new FormData();\r\n        const xhr = new XMLHttpRequest();\r\n        formData.append('avatar', avatar);\r\n        xhr.open(\"POST\",`https://qnote.qfstudio.net/api/user/avatar`);\r\n        xhr.setRequestHeader('Token',token);\r\n        xhr.onload = function () {\r\n    　　　　if (xhr.status === 200) {\r\n    　　　　　　message.success('上传成功')\r\n    　　　　} else {\r\n    　　　　　　message.info('上传失败，请检查您的网络')\r\n    　　　　}\r\n    　　};\r\n    　　xhr.send(formData);\r\n    }\r\n\r\n    beforeUpload(file) {\r\n        if(!this.state.online){message.info('暂不支持本地用户上传头像！');return;}\r\n        const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n        if (!isJpgOrPng) {\r\n          message.error('You can only upload JPG/PNG file!');\r\n        }\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n        if (!isLt2M) {\r\n          message.error('Image must smaller than 2MB!');\r\n        }\r\n        return isJpgOrPng && isLt2M;\r\n    }\r\n\r\n\r\n    render(){\r\n        const uploadButton = (\r\n            <div>\r\n              {this.state.upLoading ? <LoadingOutlined /> : <PlusOutlined />}\r\n              <div>修改头像</div>\r\n            </div>\r\n          );\r\n\r\n        return(\r\n            <div  className=\"userpad-wrapper\">\r\n                 <header>\r\n                    <Button type=\"primary\" className=\"signin-btn\" onClick={this.state.online?this.showModal.bind(this):this.showSignIn.bind(this)}>{this.state.online?'退出':'登录'}</Button>\r\n                    <Button type=\"primary\" className=\"signup-btn\" onClick={this.showSignUp.bind(this)}>注册</Button>\r\n                </header>\r\n                <main>\r\n                    <Modal\r\n                        title=\"QNote\"\r\n                        visible={this.state.visible}\r\n                        onOk={this.handleOk.bind(this)}\r\n                        onCancel={this.handleCancel.bind(this)}\r\n                        width={300}\r\n                        centered={true}\r\n                        okText=\"退出\"\r\n                        cancelText=\"取消\"\r\n                    >\r\n                        <p>是否退出登录?</p>\r\n                    </Modal>\r\n                    <div className=\"message-box\">\r\n                        <div className=\"avatar-area\">\r\n                            {/* 头像显示 */}\r\n                            <img\r\n                            src={this.state.online?(this.state.avatarUrl?this.state.avatarUrl:\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"):\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"} \r\n                            alt=\"\" \r\n                            id=\"avatar\" \r\n                            width=\"200\" \r\n                            height=\"200\"/>\r\n                            {/* 上传头像按钮 */}\r\n                            <div className=\"uploader\">\r\n                                <div>\r\n                                    <Button type=\"primary\"><label htmlFor=\"avatar-loader\" className=\"upload-btn\">上传头像</label></Button>\r\n                                    <input name=\"avatar\" type=\"file\" id=\"avatar-loader\" onChange={this.avatarChange.bind(this)}/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"username\">\r\n                            用户:{this.state.online?this.state.user.username:\"游客\"}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"message\">\r\n                        <div className=\"refresh\">\r\n                            <i className=\"iconfont icon-shuaxin\" title=\"刷新数据\" onClick={this.refresh.bind(this)}></i>\r\n                        </div>\r\n                        <Spin spinning={this.state.loading}>\r\n                            <Row gutter={48}>\r\n                                <Col span={6}>\r\n                                    <Statistic title=\"当前事务数\" value={this.state.user.currentNoteNum} />\r\n                                </Col>\r\n                                <Col span={6}>\r\n                                    <Statistic title=\"历史完成数\" value={this.state.user.completeNoteNum} />\r\n                                </Col>\r\n                                <Col span={6}>\r\n                                    <Statistic title=\"历史放弃数\" value={this.state.user.giveUpNoteNum} />\r\n                                </Col>\r\n                                <Col span={6}>\r\n                                    <Statistic title=\"历史事务数\" value={this.state.user.noteNum} />\r\n                                </Col>\r\n                            </Row>\r\n                        </Spin>      \r\n                    </div>\r\n                    <div className=\"signinpad\">\r\n                    <div className=\"signin\">\r\n                        <i className=\"iconfont icon-quxiao1 signin-cancel\" onClick={this.hideShowIn.bind(this)}></i>\r\n                        <form>\r\n                            <div className=\"input-bar\">\r\n                                <div className=\"icon\">\r\n                                    <i className=\"iconfont icon-youxiang1\"></i>\r\n                                </div>\r\n                                <input value={this.state.signin_email} type=\"text\" placeholder=\"请输入您的邮箱\" onChange={(e)=>{this.setState({signin_email:e.target.value})}}/>\r\n                            </div>\r\n                            <div className=\"input-bar\">\r\n                                <div className=\"icon\">\r\n                                    <i className=\"iconfont icon-mima\"></i>\r\n                                </div>\r\n                                <input value={this.state.signin_password} type=\"password\" placeholder=\"请输入您的密码\"  onChange={(e)=>{this.setState({signin_password:e.target.value})}}/>\r\n                            </div>\r\n                        </form>\r\n                        <div className=\"signin-submit\">\r\n                            <i className=\"iconfont icon-denglu\" onClick={this.signin.bind(this)}></i>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n                    <div className=\"signuppad\">\r\n                    <div className=\"signup\">\r\n                        <i className=\"iconfont icon-quxiao1 signup-cancel\" onClick={this.hideShowUp.bind(this)}></i>\r\n                        <form>\r\n                            <div>\r\n                                <div className=\"input-bar\">\r\n                                    <div className=\"icon\">\r\n                                        <i className=\"iconfont icon-youxiang1\"></i>\r\n                                    </div>\r\n                                    <input type=\"text\" placeholder=\"请输入您的邮箱\" value={this.state.signup_email} onChange={(e)=>{this.setState({signup_email:e.target.value})}}/>\r\n                                </div>\r\n                                <button className=\"valid-btn\"onClick={this.sendEmail.bind(this)}>\r\n                                    {\r\n                                        this.state.wait?<span>等候<span className=\"count\"></span>s</span>:<span>获取验证码</span>\r\n                                    }\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"input-bar\">\r\n                                <div className=\"icon\">\r\n                                    <i className=\"iconfont icon-yonghu\"></i>\r\n                                </div>\r\n                                <input type=\"text\" placeholder=\"请输入您的用户名\" value={this.state.signup_username} onChange={(e)=>{this.setState({signup_username:e.target.value})}}/>\r\n                            </div>\r\n                            <div className=\"input-bar\">\r\n                                <div className=\"icon\">\r\n                                    <i className=\"iconfont icon-mima\"></i>\r\n                                </div>\r\n                                <input type=\"password\" placeholder=\"请输入您的密码\"  value={this.state.signup_pwd} onChange={(e)=>{this.setState({signup_pwd:e.target.value})}}/>\r\n                            </div>\r\n                            <div className=\"input-bar\">\r\n                                <div className=\"icon\">\r\n                                    <i className=\"iconfont icon-mima\"></i>\r\n                                </div>\r\n                                <input type=\"password\" placeholder=\"请再次输入您的密码\"  value={this.state.signup_cpwd} onChange={(e)=>{this.setState({signup_cpwd:e.target.value})}}/>\r\n                            </div>\r\n                            <div className=\"input-bar\">\r\n                                <div className=\"icon\">\r\n                                    <i className=\"iconfont icon-yanzhengma\"></i>\r\n                                </div>\r\n                                <input type=\"text\" placeholder=\"请输入您的验证码\"  value={this.state.signup_valid} onChange={(e)=>{this.setState({signup_valid:e.target.value})}}/>\r\n                            </div>\r\n                        </form>\r\n                        <div className=\"signup-submit\">\r\n                            <i className=\"iconfont icon-denglu\" onClick={this.signup.bind(this)}></i>\r\n                        </div>\r\n                        </div>\r\n                    </div>  \r\n                </main>\r\n                <footer></footer>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default  UserPad;","import React from 'react';\r\nimport axios from 'axios';\r\nimport { message } from 'antd';\r\nimport '../css/notepad.scss'\r\n\r\nmessage.config({\r\n    top:100,\r\n    duration: 1,\r\n    maxCount: 1,\r\n    rtl: false,\r\n    getContainer:() => document.querySelector('.App') || document.head\r\n  });\r\n\r\nexport default class NotePad extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            online:false,\r\n            noteList:[],\r\n            info:'',\r\n            user:{\r\n                id:'string',\r\n                username:'string',\r\n                email:'string',\r\n                noteNum:0,\r\n                completeNoteNum:0,\r\n                currentNoteNum:0,\r\n                giveUpNoteNum:0\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        let token = localStorage.getItem('token');\r\n        if(!token){\r\n            console.log('事务列表-离线状态');\r\n            let noteList = JSON.parse(localStorage.getItem('noteList') || '[]');\r\n            this.setState({\r\n                online:false,\r\n                noteList:noteList\r\n            });\r\n        }\r\n        else{\r\n            console.log('事务列表-登录状态');\r\n            let noteList = JSON.parse(sessionStorage.getItem('noteList') || '[]');\r\n            let user = JSON.parse(sessionStorage.getItem('user') || '[]');\r\n            this.setState({\r\n                online:true,\r\n                noteList:noteList,\r\n                user:user\r\n            });\r\n        }\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        let len = e.target.value.length;\r\n        if(len < 20){\r\n            this.setState({\r\n                info:e.target.value\r\n            });\r\n        }\r\n        else{\r\n            message.info('注意言简意赅哦！');\r\n        }   \r\n    }\r\n\r\n    handleClick = async (e) => {\r\n        let info = this.state.info;\r\n        if(!info){\r\n            message.info('请输入便签内容！');\r\n        }\r\n        else{\r\n            if(this.state.online){\r\n                console.log('在线用户完成任务');\r\n                let token = localStorage.getItem('token');\r\n                //修改数据库数据，获取noteID\r\n                let noteID = await axios.post(`https://qnote.qfstudio.net/api/note/addTask`,{\r\n                    token:token,\r\n                    noteContent:info,\r\n                    noteRemark:''\r\n                }).then(res=>{\r\n                    return res.data.noteID\r\n                })\r\n                console.log(noteID);\r\n                //修改本地数据\r\n                let noteList = JSON.parse(sessionStorage.getItem('noteList') || '[]');\r\n                noteList.push({\r\n                    noteID:noteID,\r\n                    noteContent:info,\r\n                    noteRemark:'',\r\n                    done:false\r\n                });\r\n                this.setState({\r\n                    noteList:noteList,\r\n                    info:''\r\n                })\r\n                sessionStorage.setItem('noteList',JSON.stringify(noteList));\r\n            }\r\n            else{\r\n                console.log('本地用户添加任务')\r\n                let noteList = JSON.parse(localStorage.getItem('noteList') || '[]');\r\n                noteList.push({\r\n                    noteID:noteList.length,\r\n                    noteContent:this.state.info,\r\n                    noteRemark:'',\r\n                    done:false\r\n                });\r\n                // 修改用户数据\r\n                let user = JSON.parse(localStorage.getItem('user'));\r\n                user.currentNoteNum++;\r\n                user.noteNum++;\r\n                localStorage.setItem('user',JSON.stringify(user))\r\n                this.setState({\r\n                    noteList:noteList,\r\n                    info:'',\r\n                    user:user\r\n                })\r\n                localStorage.setItem('noteList',JSON.stringify(noteList));\r\n            }\r\n        }\r\n    }\r\n\r\n    gNote = (ID) => {\r\n        switch(this.state.online){\r\n            case true:\r\n                console.log('在线用户放弃事务')\r\n                let token = localStorage.getItem('token');\r\n                // 修改本地缓存\r\n                let noteList = this.state.noteList;\r\n                noteList.forEach((note,index)=>{\r\n                    if(note.noteID === ID){\r\n                        noteList.splice(index,1);\r\n                    }\r\n                })\r\n                this.setState({\r\n                    noteList\r\n                })\r\n                sessionStorage.setItem('noteList',JSON.stringify(noteList));\r\n                //发送网络请求\r\n                axios.post(`https://qnote.qfstudio.net/api/note/giveUpTask`,{\r\n                    noteID:ID,\r\n                    token:token,\r\n                    username:this.state.user.username\r\n                })\r\n                break;\r\n            default:\r\n                console.log('本地用户放弃事务')\r\n                let noteList2 = this.state.noteList;\r\n                noteList2.forEach((note,index)=>{\r\n                    if(note.noteID === ID){\r\n                        noteList2.splice(index,1);\r\n                    }\r\n                })\r\n                // 修改用户数据\r\n                let user = JSON.parse(localStorage.getItem('user'));\r\n                user.giveUpNoteNum++;\r\n                user.currentNoteNum--;\r\n                localStorage.setItem('user',JSON.stringify(user))\r\n                this.setState({\r\n                    noteList2\r\n                })\r\n                localStorage.setItem('noteList',JSON.stringify(noteList2));\r\n                break;\r\n        }\r\n    }\r\n\r\n    dNote = (ID) => {\r\n        switch(this.state.online){\r\n            case true:\r\n                console.log('在线用户删除已完成任务')\r\n                let token = localStorage.getItem('token');\r\n                // 修改本地缓存\r\n                let noteList = this.state.noteList;\r\n                noteList.forEach((note,index)=>{\r\n                    if(note.noteID === ID){\r\n                        noteList.splice(index,1);\r\n                    }\r\n                })\r\n                this.setState({\r\n                    noteList\r\n                })\r\n                sessionStorage.setItem('noteList',JSON.stringify(noteList));\r\n                //发送网络请求\r\n                axios.post(`https://qnote.qfstudio.net/api/note/deleteNote`,{\r\n                    noteID:ID,\r\n                    token:token,\r\n                    username:this.state.user.username\r\n                })\r\n                break;\r\n            default:\r\n                console.log('本地用户删除已完成任务')\r\n                let noteList2 = this.state.noteList;\r\n                noteList2.forEach((note,index)=>{\r\n                    if(note.noteID === ID){\r\n                        noteList2.splice(index,1);\r\n                    }\r\n                })\r\n                this.setState({\r\n                    noteList2\r\n                })\r\n                localStorage.setItem('noteList',JSON.stringify(noteList2));\r\n                break;\r\n        }\r\n    }\r\n\r\n    cNote = (ID) => {\r\n        switch(this.state.online){\r\n            case true:\r\n                console.log('在线用户完成任务')\r\n                let token = localStorage.getItem('token');\r\n                // 修改本地缓存\r\n                let noteList = this.state.noteList;\r\n                noteList.forEach((note,index)=>{\r\n                    if(note.noteID === ID){\r\n                        note.done = true;\r\n                     }\r\n                })\r\n                this.setState({\r\n                    noteList\r\n                })\r\n                sessionStorage.setItem('noteList',JSON.stringify(noteList));\r\n                //发送网络请求\r\n                axios.post(`https://qnote.qfstudio.net/api/note/completeTask`,{\r\n                    noteID:ID,\r\n                    token:token,\r\n                    username:this.state.user.username\r\n                })\r\n                break;\r\n            default:\r\n                console.log('本地用户完成任务')\r\n                let noteList2 = this.state.noteList;\r\n                noteList2.forEach((note,index)=>{\r\n                    if(note.noteID === ID){\r\n                       note.done = true;\r\n                    }\r\n                })\r\n                this.setState({\r\n                    noteList2\r\n                })\r\n                // 修改用户数据\r\n                let user = JSON.parse(localStorage.getItem('user'));\r\n                user.completeNoteNum++;\r\n                user.currentNoteNum--;\r\n                localStorage.setItem('user',JSON.stringify(user))\r\n                localStorage.setItem('noteList',JSON.stringify(noteList2));\r\n                break;\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"notepad-wrapper\">\r\n                {/* 输入栏 */}\r\n                <header>\r\n                    <input className=\"note-input-bar\"type=\"text\" placeholder=\"输入标签内容后点击按钮添加\" value={this.state.info} onChange={this.handleChange.bind(this)}/>\r\n                    <button onClick={this.handleClick.bind(this)}><i className=\"iconfont icon-bianjibijishishouxie\"></i></button>\r\n                </header>\r\n                <main>\r\n                    {/* 未完成 */}\r\n                    <div className=\"note-not\">\r\n                        <span>未完成</span>\r\n                        {\r\n                            this.state.noteList.map((note,index)=>{\r\n                                if(note.done === false){\r\n                                    return <section className=\"note-n\" key={index}>\r\n                                            <span>{note.noteContent}</span>\r\n                                            <div className=\"tool\">\r\n                                                <i className=\"iconfont icon-lujing\" onClick={this.cNote.bind(this,note.noteID)}></i>\r\n                                                <i className=\"iconfont icon-lajitong\" onClick={this.gNote.bind(this,note.noteID)}></i>\r\n                                            </div>\r\n                                        </section>\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                    {/* 已经完成 */}\r\n                    <div className=\"note-done\">\r\n                        <span>已完成</span>\r\n                        {\r\n                            this.state.noteList.map((note,index)=>{\r\n                                if(note.done !== false){\r\n                                    return <section className=\"note-c\" key={index}>\r\n                                        <span>{note.noteContent}</span>\r\n                                            <div className=\"tool\">\r\n                                                <i className=\"iconfont icon-lajitong\" onClick={this.dNote.bind(this,note.noteID)}></i>\r\n                                            </div>\r\n                                        </section>\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                </main>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react';\nimport axios from 'axios';\nimport '../css/mottopad.scss'\nimport { message } from 'antd';\n\nexport default class MottoPad extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            online : false,\n            motto:{\n                hitokoto:\"会有那么一天\",\n                from_who:'',\n                from:'原创'\n            },\n            color:`rgba(${Math.random()*255},${Math.random()*255},${Math.random()*255},.5)`\n        }\n    }\n\n    getMotto = () => {\n        axios.get(`https://qnote.qfstudio.net/api/motto`).then((res)=>{\n            this.setState({\n                motto:res.data\n            })\n            console.log(res.data);\n        }).catch((err)=>{console.log(err)})\n    }\n\n    copy = () => {\n        var tag = document.createElement('input');\n        tag.setAttribute('id', 'cp_hgz_input');\n        tag.value = this.state.motto.hitokoto;\n        document.getElementById('copy').appendChild(tag);\n        document.getElementById('cp_hgz_input').select();\n        document.execCommand('copy');\n        document.getElementById('cp_hgz_input').remove();\n        message.success('已经复制到粘贴板上！')\n    }\n\n    componentWillMount(){\n        this.getMotto();\n    }\n\n    render(){\n        return(\n            <div className=\"mottopad-wrapper\">\n                <header style={{backgroundColor:this.state.color}}>\n                </header>\n                <main className=\"motto-wrapper\">\n                     {/* 语录 */}\n                    <div className=\"motto\">\n                        <span style={{color:this.state.color}} className=\"hitokoto\">{this.state.motto.hitokoto}</span>\n                        <span style={{color:this.state.color}} className=\"from\">{`——${this.state.motto.rom_who?this.state.motto.rom_who:''}《${this.state.motto.from}》`}</span>\n                    </div>\n                </main>\n               <footer className=\"tool\"  style={{backgroundColor:this.state.color}}> \n                   {/* 换一条 */}\n                    <button onClick={this.getMotto.bind(this)}><i className=\"iconfont icon-shuaxin\"></i>换一条</button>\n                    {/* 点赞 */}\n                    <button onClick={this.copy.bind(this)}><i className=\"iconfont icon-bianjibijishishouxie\"></i>复制</button>\n               </footer>\n                \n                {/* 粘贴板 */}\n                <div id=\"copy\"></div>\n            </div>\n        )\n    }\n}","import axios from 'axios';\nimport React from 'react';\nimport { DatePicker, message , Button} from 'antd';\nimport '../css/datepad.scss'\n\nclass DatePad extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.state = {\n            online:false,\n            memorial : [\n                {title:'中国人民共和国成立',date:'1949-10-01'}\n            ],\n            input:{\n                title:'',\n                date:''\n            },\n        }\n    }\n\n    count = (begindate) => {\n        begindate = new Date(Date.parse(begindate.replace(/-/g, \"/\"))); //将开始时间由字符串格式转换为日期格式       \n\n        let current = new Date(); //此处将服务器当前日期作为结束日期，也可为其他任意时间 )\n\n        let myDate = new Date(Date.parse((`${current.getFullYear()}-${current.getMonth() + 1}-${current.getDate()}`).replace(/-/g, \"/\")))\n\n        let startDate = begindate.getTime()\n\n        let endDate = myDate.getTime(); //将结束日期转换成毫秒  \n\n        let day = parseInt((startDate-endDate)/1000/3600/24); //结束日期减去开始日期后转换成天数    \n        \n        return day;\n    }\n\n    countString = (past) => {\n        var start = new Date(past);//初始化输入时间\n        var startYear = start.getFullYear();//获取输入年份\n        var startMonth = start.getMonth() + 1;//获取输入月份\n        var startDay = start.getDate();//获取输入日期\n     \n        var current = new Date();//当前时间\n        current = new Date(Date.parse((`${current.getFullYear()}-${current.getMonth() + 1}-${current.getDate()}`).replace(/-/g, \"/\")));\n        var currentYear = current.getFullYear();//获取当前年份\n        var currentMonth = current.getMonth() + 1;//获取当前月份\n        var currentDay = current.getDate();//获取当前日期\n        var years = 0;//声明一个年数变量\n        var months = currentMonth - startMonth + (Math.abs(currentYear - startYear)) * 12;//总月\n        if (currentMonth * 100 + currentDay < startMonth * 100 + startDay) {\n            months--;//如果结束日期小月输入日期，月数要-1\n        }\n        years = Math.floor(months / 12);//取整计算年数\n        months = months % 12;//取余计算月数\n        var middleDate = new Date(start);//中间时间\n        middleDate.setFullYear(startYear + years);//设置中间时间年份\n        middleDate.setMonth(start.getMonth() + months);//设置中间时间月份\n        var days =  Math.floor( ( current.getTime()- middleDate.getTime()) / 24 / 60/ 60 / 1000);//计算天数\n        let string = '';\n        if(years){\n            string += `${years}年`;\n        }\n        if(months){\n            string += `${months}月`\n        }\n        if(days){\n            string += `${days}天`\n        }\n        console.log(string)\n        return string;\n    }\n\n    titleChange = (e) => {\n        let len = e.target.value.length;\n        if(len < 10){\n            this.setState({\n                input:{\n                    title:e.target.value,\n                    date:this.state.input.date\n                }\n            });\n        }\n        else{\n            message.info('注意言简意赅哦！');\n        }   \n    }\n\n    dateChange = (date, dateString) => {\n        this.setState({\n            input:{\n                title:this.state.input.title,\n                date:dateString\n            }\n        })\n    }\n\n    check(){\n        if(!this.state.input.title){\n            message.info('请输入标题！');\n            return false;\n        }\n        if(!this.state.input.date){\n            message.info('请选择日期！');\n            return false;\n        }\n        return true;\n    }\n\n    submit = () => {\n        if(!this.check()){\n            message.info('请确保信息填写正确！');\n            return;\n        }\n        console.log(this.state.online)\n        switch(this.state.online){\n            case true:\n                const token = localStorage.getItem('token');\n                console.log('添加纪念日-在线模式');\n                axios.post(`https://qnote.qfstudio.net/api/memorial/add`,{token,...this.state.input}).then(res=>{\n                    message.success('添加成功！');\n                }).catch(err=>{\n                    message.info('添加失败，请检查您的网络！');\n                })\n                let memorialOnLine = JSON.parse(sessionStorage.getItem('memorial') || '[]');\n                memorialOnLine.push(this.state.input);\n                sessionStorage.setItem('memorial',JSON.stringify(memorialOnLine));\n                this.setState({\n                    memorial:memorialOnLine,\n                    input:{\n                        title:'',\n                        date:this.state.input.date\n                    }\n                })\n                break;\n            default:\n                console.log('添加纪念日-离线模式')\n                let memorial = JSON.parse(localStorage.getItem('memorial') || '[]');\n                memorial.push(this.state.input);\n                localStorage.setItem('memorial',JSON.stringify(memorial));\n                this.setState({\n                    memorial:memorial,\n                    input:{\n                        title:'',\n                        date:this.state.input.date\n                    }\n                })\n                break;\n        }\n    }\n\n    async componentWillMount(){\n        let token = localStorage.getItem('token');\n        if(!token){\n            console.log('纪念日列表-离线状态');\n            let memorial = JSON.parse(localStorage.getItem('memorial') || JSON.stringify([{title:'中国人民共和国成立71周年',date:'2020-10-01'}]));\n            this.setState({\n                online:false,\n                memorial:memorial\n            });\n        }\n        else{\n            console.log('纪念日列表-登录状态');\n            let memorial = JSON.parse(sessionStorage.getItem('memorial'));\n            if(!memorial){\n                axios.post(`https://qnote.qfstudio.net/api/memorial`,{\n                    token:token\n                }).then(res=>{\n                    this.setState({\n                        online:true,\n                        memorial:res.data.memorial\n                    })\n                })\n                return;\n            }\n            this.setState({\n                online:true,\n                memorial:memorial\n            })\n        }\n    }\n\n    render(){\n        return(\n            <div className=\"datepad-wrapper\">\n                <div className=\"tool\">\n                    <input type=\"text\" value={this.state.input.title} onChange={this.titleChange.bind(this)} placeholder=\"请输入纪念日主题\" className=\"title-input\"/>\n                    <DatePicker showToday={true} onChange={this.dateChange.bind(this)}></DatePicker>                \n                    <Button type=\"primary\" onClick={this.submit.bind(this)}>添加纪念日</Button>\n                </div>\n                <div className=\"date-list\">\n                    {\n                        this.state.memorial.map((date,index)=>{\n                            return(\n                            <section className=\"date\" key={index} style={{backgroundColor:`rgba(${Math.random()*255},${Math.random()*255},${Math.random()*255},.5)`,color:`rgba(${Math.random()*255},${Math.random()*255},${Math.random()*255},.5)`}}>\n                                <span className=\"title\">{date.title}</span>\n                                <span className=\"date\">{date.date}</span>\n                                <span className={this.count(date.date)===0?'count':'hidden'}>今天</span>  \n                                <span className={this.count(date.date)===0?'hidden':'count'}>{`${Math.abs(this.count(date.date))}${this.count(date.date)<0?'天前':'天后'}`}</span>\n                            </section>\n                            )\n                        })\n                    }\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default  DatePad;","import React from 'react';\nimport { HashRouter as Router, Link, Route } from 'react-router-dom';\nimport { message } from 'antd';\nimport UserPad from './pages/userpad'\nimport NotePad from './pages/notepad'\nimport MottoPad from './pages/mottopad'\nimport DatePad from './pages/datepad'\nimport './App.scss';\n\nmessage.config({\n  top:100,\n  duration: 1,\n  maxCount: 1,\n  rtl: false,\n  getContainer:() => document.querySelector('.App') || document.head\n});\n\nexport default class App extends React.Component{\n\n  constructor(props){\n    super(props);\n    this.state = {\n    }\n  }\n\n  render(){\n    return(\n      <div className=\"App\">\n        <Router>\n          <nav>\n            <section>\n              <i className=\"iconfont icon-daohanggerenzhongxin\"></i> \n              <Link to=\"/\">QNote</Link>\n            </section>\n            <section>\n              <i className=\"iconfont icon-bianjibijishishouxie\"></i> \n              <Link to=\"/note\">事务列表</Link>\n            </section>\n            <section>\n              <i className=\"iconfont icon-rili\"></i> \n              <Link to=\"./date\">纪念日</Link>\n            </section>\n            <section>\n              <i className=\"iconfont icon-liuyan\"></i> \n              <Link to=\"./motto\" >经典语录</Link>\n            </section>\n            {/* <section>\n              <i className=\"iconfont icon-shezhi\"></i> \n              <Link onClick={()=>{message.info('功能开发中')}}>应用设置</Link>\n            </section> */}\n          </nav>\n          <main className=\"container\">\n            <Route exact path=\"/\" component={UserPad}></Route>\n            <Route path=\"/note\" component={NotePad}></Route>\n            <Route path=\"/date\" component={DatePad}></Route>\n            <Route path=\"/motto\" component={MottoPad}></Route>\n          </main>\n        </Router>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport './css/iconfont/iconfont.css'\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n"],"sourceRoot":""}