(this.webpackJsonpqnote_pc=this.webpackJsonpqnote_pc||[]).push([[0],{118:function(e,t,n){e.exports=n(185)},123:function(e,t,n){},124:function(e,t,n){},141:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(5),o=n.n(s),c=(n(123),n(124),n(33)),l=n(34),r=n(37),u=n(36),m=n(44),p=n(8),g=n(189),d=n(31),h=n.n(d),f=n(57),v=n(58),E=n(188),b=n(187),N=n(190),S=n(51),k=n(24),w=n.n(k);n(141),n(142);g.b.config({top:100,duration:1,maxCount:1,rtl:!1,getContainer:function(){return document.querySelector(".App")||document.head}});var C=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).componentWillMount=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=localStorage.getItem("token"))){e.next=4;break}return e.next=4,w.a.post("https://qnote.qfstudio.net/api/authToken",{token:t}).then((function(e){e.data.ok?(a.setState({online:!0}),w.a.get("https://qnote.qfstudio.net/api/user/getMessage",{params:{token:localStorage.getItem("token")}}).then((function(e){a.setState({user:e.data.user}),sessionStorage.setItem("user",JSON.stringify(e.data.user)),sessionStorage.setItem("noteList",JSON.stringify(e.data.note)),a.setState({user:e.data.user,noteList:e.data.noteList}),a.hideShowIn()})).catch((function(e){console.log(e)}))):localStorage.removeItem("token")}));case 4:case"end":return e.stop()}}),e)}))),a.showSignIn=function(){Object(S.a)({targets:".signinpad",left:"0"})},a.showSignUp=function(){Object(S.a)({targets:".signuppad",right:"0"})},a.hideShowIn=function(){Object(S.a)({targets:".signinpad",left:"-100%"})},a.hideShowUp=function(){Object(S.a)({targets:".signuppad",right:"-100%"})},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(typeof e),a.signout(),a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1})},a.signin=Object(f.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.signinCheck()){e.next=2;break}return e.abrupt("return");case 2:return t=a.state.signin_email,n=a.state.signin_password,e.next=7,w.a.post("https://qnote.qfstudio.net/api/signin",{email:t,password:n}).then((function(e){localStorage.setItem("token",e.data.token),a.setState({online:!0}),g.b.success("\u767b\u5f55\u6210\u529f")})).catch((function(e){g.b.info("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u90ae\u7bb1\u4e0e\u5bc6\u7801")}));case 7:w.a.get("https://qnote.qfstudio.net/api/user/getMessage",{params:{token:localStorage.getItem("token")}}).then((function(e){a.setState({user:e.data.user}),sessionStorage.setItem("user",JSON.stringify(e.data.user)),sessionStorage.setItem("noteList",JSON.stringify(e.data.note)),a.hideShowIn()})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)}))),a.signup=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.signupCheck()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w.a.post("https://qnote.qfstudio.net/api/register",{email:a.state.signup_email,username:a.state.signup_username,password:a.state.signup_pwd,verification:a.state.signup_valid}).then((function(e){g.b.success("\u6ce8\u518c\u6210\u529f")})).catch((function(e){console.log(a.state.signup_email),console.log(a.state.signup_username),console.log(a.state.signup_pwd),console.log(a.state.signup_valid),g.b.info("\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u4fe1\u606f\u662f\u5426\u6b63\u786e")}));case 4:case"end":return e.stop()}}),e)}))),a.setWait=function(e){console.log("\u8f6c\u6362"),a.setState({wait:e})},a.sendEmail=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.state.wait?g.b.info("\u8bf7\u7b49\u5f85"):/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(a.state.signup_email)?w.a.post("https://qnote.qfstudio.net/api/sendEmail",{email:a.state.signup_email}).then((function(e){e.data.valid?(g.b.success("\u53d1\u9001\u6210\u529f\uff01"),a.setWait(!0),Object(S.a)({targets:".count",innerHTML:[60,0],easing:"linear",round:1,duration:6e4}),setTimeout(a.setWait.bind(Object(v.a)(a),!1),6e4)):g.b.info("\u53d1\u9001\u5931\u8d25\uff01")})):g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u90ae\u7bb1\uff01");case 1:case"end":return e.stop()}}),e)}))),a.signout=function(){localStorage.removeItem("token"),a.setState({online:!1})},a.state={online:!1,avatarURL:"",signin_email:"",signin_password:"",signup_email:"",signup_username:"",signup_pwd:"",signup_cpwd:"",signup_valid:"",visible:!1,wait:!1,user:{id:"string",username:"string",email:"string",noteNum:0,completeNoteNum:0,currentNoteNum:0,giveUpNoteNum:0}},a}return Object(l.a)(n,[{key:"signinCheck",value:function(){var e=this.state.signin_email,t=this.state.signin_password;return/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(e)?!(t.length<6||t.length>10)||(g.b.info("\u5bc6\u7801\u957f\u5ea6\u4e0d\u5408\u6cd5"),!1):(g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u90ae\u7bb1\uff01"),!1)}},{key:"signupCheck",value:function(){var e=this.state.signup_pwd,t=this.state.signup_cpwd,n=this.state.signup_valid;return/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(this.state.signup_email)?e.length<6||e.length>10?(g.b.info("\u5bc6\u7801\u957f\u5ea6\u9700\u57286\u4e0e10\u4e4b\u95f4"),!1):t!==e?(g.b.info("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4"),!1):!!n||(g.b.info("\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1\u9a8c\u8bc1\u7801"),!1):(g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u90ae\u7bb1"),!1)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"userpad-wrapper"},i.a.createElement("header",null,i.a.createElement("button",{className:"signin-btn",onClick:this.state.online?this.showModal.bind(this):this.showSignIn.bind(this)},this.state.online?"\u9000\u51fa":"\u767b\u5f55"),i.a.createElement("button",{className:"signup-btn",onClick:this.showSignUp.bind(this)},"\u6ce8\u518c")),i.a.createElement("main",null,i.a.createElement(E.a,{title:"QNote",visible:this.state.visible,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this),width:300,centered:!0,okText:"\u9000\u51fa",cancelText:"\u53d6\u6d88"},i.a.createElement("p",null,"\u662f\u5426\u9000\u51fa\u767b\u5f55?")),i.a.createElement("div",{className:"avatar-area"},i.a.createElement(b.a,{size:128,src:this.state.avatarURL?this.state.avatarURL:"",icon:i.a.createElement(N.a,null)}),i.a.createElement("div",{className:this.state.online?".hide":"signin"})),i.a.createElement("div",null,"\u7528\u6237:",this.state.online?this.state.user.username:"\u6e38\u5ba2"),i.a.createElement("div",{className:"signinpad"},i.a.createElement("div",{className:"signin"},i.a.createElement("i",{className:"iconfont icon-quxiao1 signin-cancel",onClick:this.hideShowIn.bind(this)}),i.a.createElement("form",null,i.a.createElement("div",{className:"input-bar"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"iconfont icon-youxiang"})),i.a.createElement("input",{value:this.state.signin_email,type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1",onChange:function(t){e.setState({signin_email:t.target.value})}})),i.a.createElement("div",{className:"input-bar"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"iconfont icon-mima"})),i.a.createElement("input",{value:this.state.signin_password,type:"password",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801",onChange:function(t){e.setState({signin_password:t.target.value})}}))),i.a.createElement("div",{className:"signin-submit"},i.a.createElement("i",{className:"iconfont icon-denglu",onClick:this.signin.bind(this)})))),i.a.createElement("div",{className:"signuppad"},i.a.createElement("div",{className:"signup"},i.a.createElement("i",{className:"iconfont icon-quxiao1 signup-cancel",onClick:this.hideShowUp.bind(this)}),i.a.createElement("form",null,i.a.createElement("div",null,i.a.createElement("div",{className:"input-bar"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"iconfont icon-youxiang"})),i.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1",value:this.state.signup_email,onChange:function(t){e.setState({signup_email:t.target.value})}})),i.a.createElement("button",{className:"valid-btn",onClick:this.sendEmail.bind(this)},this.state.wait?i.a.createElement("span",null,"\u7b49\u5019",i.a.createElement("span",{className:"count"}),"s"):i.a.createElement("span",null,"\u83b7\u53d6\u9a8c\u8bc1\u7801"))),i.a.createElement("div",{className:"input-bar"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"iconfont icon-yonghu"})),i.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",value:this.state.signup_username,onChange:function(t){e.setState({signup_username:t.target.value})}})),i.a.createElement("div",{className:"input-bar"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"iconfont icon-mima"})),i.a.createElement("input",{type:"password",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801",value:this.state.signup_pwd,onChange:function(t){e.setState({signup_pwd:t.target.value})}})),i.a.createElement("div",{className:"input-bar"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"iconfont icon-mima"})),i.a.createElement("input",{type:"password",placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u60a8\u7684\u5bc6\u7801",value:this.state.signup_cpwd,onChange:function(t){e.setState({signup_cpwd:t.target.value})}})),i.a.createElement("div",{className:"input-bar"},i.a.createElement("div",{className:"icon"},i.a.createElement("i",{className:"iconfont icon-yanzhengma"})),i.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u9a8c\u8bc1\u7801",value:this.state.signup_valid,onChange:function(t){e.setState({signup_valid:t.target.value})}}))),i.a.createElement("div",{className:"signup-submit"},i.a.createElement("i",{className:"iconfont icon-denglu",onClick:this.signup.bind(this)}))))),i.a.createElement("footer",null))}}]),n}(i.a.Component);n(180);g.b.config({top:100,duration:1,maxCount:1,rtl:!1,getContainer:function(){return document.querySelector(".App")||document.head}});var _=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=function(e){e.target.value.length<15?a.setState({info:e.target.value}):g.b.info("\u6ce8\u610f\u8a00\u7b80\u610f\u8d45\u54e6\uff01")},a.handleClick=function(e){if(a.state.info)if(a.online);else{var t=JSON.parse(localStorage.getItem("noteList")||"[]");t.push({noteID:t.length,noteContent:a.state.info,noteRemark:"",done:!1}),a.setState({noteList:t,info:""}),localStorage.setItem("noteList",JSON.stringify(t))}else g.b.info("\u8bf7\u8f93\u5165\u4fbf\u7b7e\u5185\u5bb9\uff01")},a.gNote=function(e){switch(a.state.online){case!0:var t=localStorage.getItem("token"),n=a.state.noteList;n.forEach((function(t,a){t.noteID===e&&n.splice(a,1)})),a.setState({noteList:n}),sessionStorage.setItem("noteList",JSON.stringify(n)),w.a.post("https://qnote.qfstudio.net/api/note/giveUpTask",{noteID:e,token:t});break;default:var i=a.state.noteList;i.forEach((function(t,n){t.noteID===e&&i.splice(n,1)})),a.setState({noteList2:i}),localStorage.setItem("noteList",JSON.stringify(i))}},a.dNote=function(e){switch(a.state.online){case!0:localStorage.getItem("token");break;default:var t=a.state.noteList;t.forEach((function(n,a){n.noteID===e&&t.splice(a,1)})),a.setState({noteList:t}),localStorage.setItem("noteList",JSON.stringify(t))}},a.cNote=function(e){switch(a.state.online){case!0:localStorage.getItem("token");break;default:var t=a.state.noteList;t.forEach((function(t,n){t.noteID===e&&(t.done=!0)})),a.setState({noteList:t}),localStorage.setItem("noteList",JSON.stringify(t))}},a.state={online:!1,noteList:[],info:""},a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){if(localStorage.getItem("token")){console.log("\u4e8b\u52a1\u5217\u8868-\u767b\u5f55\u72b6\u6001");var e=JSON.parse(sessionStorage.getItem("noteList")||"[]");this.setState({online:!0,noteList:e})}else{console.log("\u4e8b\u52a1\u5217\u8868-\u79bb\u7ebf\u72b6\u6001");var t=JSON.parse(localStorage.getItem("noteList")||"[]");this.setState({online:!1,noteList:t})}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"notepad-wrapper"},i.a.createElement("header",null,i.a.createElement("input",{className:"note-input-bar",type:"text",placeholder:"\u8f93\u5165\u6807\u7b7e\u5185\u5bb9\u540e\u70b9\u51fb\u6309\u94ae\u6dfb\u52a0",value:this.state.info,onChange:this.handleChange.bind(this)}),i.a.createElement("button",{onClick:this.handleClick.bind(this)},i.a.createElement("i",{className:"iconfont icon-bianjibijishishouxie"}))),i.a.createElement("main",null,i.a.createElement("div",{className:"note-not"},i.a.createElement("span",null,"\u672a\u5b8c\u6210"),this.state.noteList.map((function(t,n){if(!1===t.done)return i.a.createElement("section",{className:"note-n",key:n},i.a.createElement("span",null,t.noteContent),i.a.createElement("div",{className:"tool"},i.a.createElement("i",{className:"iconfont icon-lujing",onClick:e.cNote.bind(e,t.noteID)}),i.a.createElement("i",{className:"iconfont icon-lajitong",onClick:e.gNote.bind(e,t.noteID)})))}))),i.a.createElement("div",{className:"note-done"},i.a.createElement("span",null,"\u5df2\u5b8c\u6210"),this.state.noteList.map((function(t,n){if(!1!==t.done)return i.a.createElement("section",{className:"note-c",key:n},i.a.createElement("span",null,t.noteContent),i.a.createElement("div",{className:"tool"},i.a.createElement("i",{className:"iconfont icon-lajitong",onClick:e.dNote.bind(e,t.noteID)})))})))))}}]),n}(i.a.Component),O=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={online:!1,motto:{hitokoto:"\u4f1a\u6709\u90a3\u4e48\u4e00\u5929",from_who:"",from:"\u539f\u521b"}},a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=this;w.a.get("https://qnote.qfstudio.net/api/motto").then((function(t){e.setState({motto:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"mottopad-wrapper"},i.a.createElement("div",{className:"motto-wrapper"},i.a.createElement("div",{className:"motto"})),i.a.createElement("div",{className:"tool"}),i.a.createElement("button",{className:"turn-to-collect"}))}}]),n}(i.a.Component);n(181);g.b.config({top:100,duration:1,maxCount:1,rtl:!1,getContainer:function(){return document.querySelector(".App")||document.head}});var I=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(m.a,null,i.a.createElement("nav",null,i.a.createElement("section",null,i.a.createElement("i",{className:"iconfont icon-daohanggerenzhongxin"}),i.a.createElement(m.b,{to:"/"},"QNote")),i.a.createElement("section",null,i.a.createElement("i",{className:"iconfont icon-bianjibijishishouxie"}),i.a.createElement(m.b,{to:"/note"},"\u4e8b\u52a1\u5217\u8868")),i.a.createElement("section",null,i.a.createElement("i",{className:"iconfont icon-icon-test"}),i.a.createElement(m.b,{onClick:function(){g.b.info("\u529f\u80fd\u7ef4\u62a4\u4e2d")}},"\u7eaa\u5ff5\u65e5")),i.a.createElement("section",null,i.a.createElement("i",{className:"iconfont icon-liuyan"}),i.a.createElement(m.b,{to:"./motto"},"\u7ecf\u5178\u8bed\u5f55")),i.a.createElement("section",null,i.a.createElement("i",{className:"iconfont icon-shezhi"}),i.a.createElement(m.b,{onClick:function(){g.b.info("\u529f\u80fd\u5f00\u53d1\u4e2d")}},"\u5e94\u7528\u8bbe\u7f6e"))),i.a.createElement("main",{className:"container"},i.a.createElement(p.a,{exact:!0,path:"/",component:C}),i.a.createElement(p.a,{path:"/note",component:_}),i.a.createElement(p.a,{path:"/motto",component:O}))))}}]),n}(i.a.Component);o.a.render(i.a.createElement(I,null),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.4445864e.chunk.js.map