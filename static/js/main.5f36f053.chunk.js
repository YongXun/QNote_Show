(this.webpackJsonpqnote_pc=this.webpackJsonpqnote_pc||[]).push([[0],{133:function(e,t,n){e.exports=n(220)},138:function(e,t,n){},139:function(e,t,n){},156:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(5),o=n.n(i),c=(n(138),n(139),n(35)),l=n(36),r=n(40),u=n(39),m=n(56),p=n(8),g=n(224),d=n(25),h=n.n(d),f=n(44),v=n(64),E=n(61),N=n(223),b=n(222),S=n(227),k=n(228),w=n(226),I=n(225),O=n(55),C=n(18),y=n.n(C);n(156),n(157);g.b.config({top:100,duration:1,maxCount:1,rtl:!1,getContainer:function(){return document.querySelector(".App")||document.head}});var _=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).componentWillMount=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=localStorage.getItem("token"))){e.next=4;break}return e.next=4,y.a.post("https://qnote.qfstudio.net/api/authToken",{token:t}).then((function(e){if(e.data.ok){a.setState({online:!0});var t=JSON.parse(sessionStorage.getItem("user")||"[]"),n=JSON.parse(sessionStorage.getItem("noteList")||"[]");console.log(null===t),0===t.length?y.a.get("https://qnote.qfstudio.net/api/user/getMessage",{params:{token:localStorage.getItem("token")}}).then((function(e){a.setState({user:e.data.user}),sessionStorage.setItem("user",JSON.stringify(e.data.user)),sessionStorage.setItem("noteList",JSON.stringify(e.data.note)),a.setState({user:e.data.user,noteList:e.data.noteList}),a.hideShowIn()})).catch((function(e){console.log(e)})):a.setState({user:t,noteList:n})}else localStorage.removeItem("token")}));case 4:case"end":return e.stop()}}),e)}))),a.showSignIn=function(){Object(O.a)({targets:".signinpad",left:"0"})},a.showSignUp=function(){Object(O.a)({targets:".signuppad",right:"0"})},a.hideShowIn=function(){Object(O.a)({targets:".signinpad",left:"-100%"})},a.hideShowUp=function(){Object(O.a)({targets:".signuppad",right:"-100%"})},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(typeof e),a.signout(),a.setState({visible:!1})},a.handleCancel=function(e){a.setState({visible:!1})},a.signin=Object(f.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.signinCheck()){e.next=2;break}return e.abrupt("return");case 2:return t=a.state.signin_email,n=a.state.signin_password,e.next=7,y.a.post("https://qnote.qfstudio.net/api/signin",{email:t,password:n}).then((function(e){localStorage.setItem("token",e.data.token),a.setState({online:!0}),g.b.success("\u767b\u5f55\u6210\u529f")})).catch((function(e){g.b.info("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u90ae\u7bb1\u4e0e\u5bc6\u7801")}));case 7:a.setState({signin_email:"",signin_password:""}),y.a.get("https://qnote.qfstudio.net/api/user/getMessage",{params:{token:localStorage.getItem("token")}}).then((function(e){a.setState({user:e.data.user}),sessionStorage.setItem("user",JSON.stringify(e.data.user)),sessionStorage.setItem("noteList",JSON.stringify(e.data.note)),a.hideShowIn()})).catch((function(e){console.log(e)}));case 9:case"end":return e.stop()}}),e)}))),a.signup=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.signupCheck()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.a.post("https://qnote.qfstudio.net/api/register",{email:a.state.signup_email,username:a.state.signup_username,password:a.state.signup_pwd,verification:a.state.signup_valid}).then((function(e){g.b.success("\u6ce8\u518c\u6210\u529f")})).catch((function(e){console.log(a.state.signup_email),console.log(a.state.signup_username),console.log(a.state.signup_pwd),console.log(a.state.signup_valid),g.b.info("\u6ce8\u518c\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u4fe1\u606f\u662f\u5426\u6b63\u786e")}));case 4:case"end":return e.stop()}}),e)}))),a.setWait=function(e){console.log("\u8f6c\u6362"),a.setState({wait:e})},a.sendEmail=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.state.wait?g.b.info("\u8bf7\u7b49\u5f85"):/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(a.state.signup_email)?y.a.post("https://qnote.qfstudio.net/api/sendEmail",{email:a.state.signup_email}).then((function(e){e.data.valid?(g.b.success("\u53d1\u9001\u6210\u529f\uff01"),a.setWait(!0),Object(O.a)({targets:".count",innerHTML:[60,0],easing:"linear",round:1,duration:6e4}),setTimeout(a.setWait.bind(Object(v.a)(a),!1),6e4)):g.b.info("\u53d1\u9001\u5931\u8d25\uff01")})):g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u90ae\u7bb1\uff01");case 1:case"end":return e.stop()}}),e)}))),a.signout=function(){localStorage.removeItem("token"),a.setState({online:!1})},a.state={online:!1,avatarURL:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",signin_email:"",signin_password:"",signup_email:"",signup_username:"",signup_pwd:"",signup_cpwd:"",signup_valid:"",visible:!1,wait:!1,user:{id:"string",username:"string",email:"string",noteNum:0,completeNoteNum:0,currentNoteNum:0,giveUpNoteNum:0}},a}return Object(l.a)(n,[{key:"signinCheck",value:function(){var e=this.state.signin_email,t=this.state.signin_password;return/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(e)?!(t.length<6||t.length>10)||(g.b.info("\u5bc6\u7801\u957f\u5ea6\u4e0d\u5408\u6cd5"),!1):(g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u90ae\u7bb1\uff01"),!1)}},{key:"signupCheck",value:function(){var e=this.state.signup_pwd,t=this.state.signup_cpwd,n=this.state.signup_valid;return/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(this.state.signup_email)?e.length<6||e.length>10?(g.b.info("\u5bc6\u7801\u957f\u5ea6\u9700\u57286\u4e0e10\u4e4b\u95f4"),!1):t!==e?(g.b.info("\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4"),!1):!!n||(g.b.info("\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1\u9a8c\u8bc1\u7801"),!1):(g.b.info("\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u90ae\u7bb1"),!1)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"userpad-wrapper"},s.a.createElement("header",null,s.a.createElement(E.a,{type:"primary",className:"signin-btn",onClick:this.state.online?this.showModal.bind(this):this.showSignIn.bind(this)},this.state.online?"\u9000\u51fa":"\u767b\u5f55"),s.a.createElement(E.a,{type:"primary",className:"signup-btn",onClick:this.showSignUp.bind(this)},"\u6ce8\u518c")),s.a.createElement("main",null,s.a.createElement(N.a,{title:"QNote",visible:this.state.visible,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this),width:300,centered:!0,okText:"\u9000\u51fa",cancelText:"\u53d6\u6d88"},s.a.createElement("p",null,"\u662f\u5426\u9000\u51fa\u767b\u5f55?")),s.a.createElement("div",{className:"message-box"},s.a.createElement("div",{className:"avatar-area"},s.a.createElement(b.a,{size:150,src:this.state.avatarURL?this.state.avatarURL:"",icon:s.a.createElement(I.a,null)}),s.a.createElement("div",{className:this.state.online?".hide":"signin"})),s.a.createElement("div",{className:"username"},"\u7528\u6237:",this.state.online?this.state.user.username:"\u6e38\u5ba2")),s.a.createElement("div",{className:this.state.online?"showpad":"hidden"},s.a.createElement(S.a,{gutter:48},s.a.createElement(k.a,{span:6},s.a.createElement(w.a,{title:"\u5f53\u524d\u4e8b\u52a1\u6570",value:this.state.user.currentNoteNum})),s.a.createElement(k.a,{span:6},s.a.createElement(w.a,{title:"\u5386\u53f2\u5b8c\u6210\u6570",value:this.state.user.completeNoteNum})),s.a.createElement(k.a,{span:6},s.a.createElement(w.a,{title:"\u5386\u53f2\u653e\u5f03\u6570",value:this.state.user.giveUpNoteNum})),s.a.createElement(k.a,{span:6},s.a.createElement(w.a,{title:"\u5386\u53f2\u4e8b\u52a1\u6570",value:this.state.user.noteNum})))),s.a.createElement("div",{className:"signinpad"},s.a.createElement("div",{className:"signin"},s.a.createElement("i",{className:"iconfont icon-quxiao1 signin-cancel",onClick:this.hideShowIn.bind(this)}),s.a.createElement("form",null,s.a.createElement("div",{className:"input-bar"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"iconfont icon-youxiang1"})),s.a.createElement("input",{value:this.state.signin_email,type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1",onChange:function(t){e.setState({signin_email:t.target.value})}})),s.a.createElement("div",{className:"input-bar"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"iconfont icon-mima"})),s.a.createElement("input",{value:this.state.signin_password,type:"password",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801",onChange:function(t){e.setState({signin_password:t.target.value})}}))),s.a.createElement("div",{className:"signin-submit"},s.a.createElement("i",{className:"iconfont icon-denglu",onClick:this.signin.bind(this)})))),s.a.createElement("div",{className:"signuppad"},s.a.createElement("div",{className:"signup"},s.a.createElement("i",{className:"iconfont icon-quxiao1 signup-cancel",onClick:this.hideShowUp.bind(this)}),s.a.createElement("form",null,s.a.createElement("div",null,s.a.createElement("div",{className:"input-bar"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"iconfont con-youxiang1"})),s.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1",value:this.state.signup_email,onChange:function(t){e.setState({signup_email:t.target.value})}})),s.a.createElement("button",{className:"valid-btn",onClick:this.sendEmail.bind(this)},this.state.wait?s.a.createElement("span",null,"\u7b49\u5019",s.a.createElement("span",{className:"count"}),"s"):s.a.createElement("span",null,"\u83b7\u53d6\u9a8c\u8bc1\u7801"))),s.a.createElement("div",{className:"input-bar"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"iconfont icon-yonghu"})),s.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u7528\u6237\u540d",value:this.state.signup_username,onChange:function(t){e.setState({signup_username:t.target.value})}})),s.a.createElement("div",{className:"input-bar"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"iconfont icon-mima"})),s.a.createElement("input",{type:"password",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801",value:this.state.signup_pwd,onChange:function(t){e.setState({signup_pwd:t.target.value})}})),s.a.createElement("div",{className:"input-bar"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"iconfont icon-mima"})),s.a.createElement("input",{type:"password",placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u60a8\u7684\u5bc6\u7801",value:this.state.signup_cpwd,onChange:function(t){e.setState({signup_cpwd:t.target.value})}})),s.a.createElement("div",{className:"input-bar"},s.a.createElement("div",{className:"icon"},s.a.createElement("i",{className:"iconfont icon-yanzhengma"})),s.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u60a8\u7684\u9a8c\u8bc1\u7801",value:this.state.signup_valid,onChange:function(t){e.setState({signup_valid:t.target.value})}}))),s.a.createElement("div",{className:"signup-submit"},s.a.createElement("i",{className:"iconfont icon-denglu",onClick:this.signup.bind(this)}))))),s.a.createElement("footer",null))}}]),n}(s.a.Component);n(215);g.b.config({top:100,duration:1,maxCount:1,rtl:!1,getContainer:function(){return document.querySelector(".App")||document.head}});var L=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChange=function(e){e.target.value.length<20?a.setState({info:e.target.value}):g.b.info("\u6ce8\u610f\u8a00\u7b80\u610f\u8d45\u54e6\uff01")},a.handleClick=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,s,i,o,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.info){e.next=5;break}g.b.info("\u8bf7\u8f93\u5165\u4fbf\u7b7e\u5185\u5bb9\uff01"),e.next=23;break;case 5:if(!a.state.online){e.next=18;break}return console.log("\u5728\u7ebf\u7528\u6237\u5b8c\u6210\u4efb\u52a1"),s=localStorage.getItem("token"),e.next=10,y.a.post("https://qnote.qfstudio.net/api/note/addTask",{token:s,noteContent:n,noteRemark:""}).then((function(e){return e.data.noteID}));case 10:i=e.sent,console.log(i),(o=JSON.parse(sessionStorage.getItem("noteList")||"[]")).push({noteID:i,noteContent:n,noteRemark:"",done:!1}),a.setState({noteList:o,info:""}),sessionStorage.setItem("noteList",JSON.stringify(o)),e.next=23;break;case 18:console.log("\u672c\u5730\u7528\u6237\u6dfb\u52a0\u4efb\u52a1"),(c=JSON.parse(localStorage.getItem("noteList")||"[]")).push({noteID:c.length,noteContent:a.state.info,noteRemark:"",done:!1}),a.setState({noteList:c,info:""}),localStorage.setItem("noteList",JSON.stringify(c));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.gNote=function(e){switch(a.state.online){case!0:console.log("\u5728\u7ebf\u7528\u6237\u653e\u5f03\u4e8b\u52a1");var t=localStorage.getItem("token"),n=a.state.noteList;n.forEach((function(t,a){t.noteID===e&&n.splice(a,1)})),a.setState({noteList:n}),sessionStorage.setItem("noteList",JSON.stringify(n)),y.a.post("https://qnote.qfstudio.net/api/note/giveUpTask",{noteID:e,token:t,username:a.state.user.username});break;default:console.log("\u672c\u5730\u7528\u6237\u653e\u5f03\u4e8b\u52a1");var s=a.state.noteList;s.forEach((function(t,n){t.noteID===e&&s.splice(n,1)})),a.setState({noteList2:s}),localStorage.setItem("noteList",JSON.stringify(s))}},a.dNote=function(e){switch(a.state.online){case!0:console.log("\u5728\u7ebf\u7528\u6237\u5220\u9664\u5df2\u5b8c\u6210\u4efb\u52a1");var t=localStorage.getItem("token"),n=a.state.noteList;n.forEach((function(t,a){t.noteID===e&&n.splice(a,1)})),a.setState({noteList:n}),sessionStorage.setItem("noteList",JSON.stringify(n)),y.a.post("https://qnote.qfstudio.net/api/note/deleteNote",{noteID:e,token:t,username:a.state.user.username});break;default:console.log("\u672c\u5730\u7528\u6237\u5220\u9664\u5df2\u5b8c\u6210\u4efb\u52a1");var s=a.state.noteList;s.forEach((function(t,n){t.noteID===e&&s.splice(n,1)})),a.setState({noteList2:s}),localStorage.setItem("noteList",JSON.stringify(s))}},a.cNote=function(e){switch(a.state.online){case!0:console.log("\u5728\u7ebf\u7528\u6237\u5b8c\u6210\u4efb\u52a1");var t=localStorage.getItem("token"),n=a.state.noteList;n.forEach((function(t,n){t.noteID===e&&(t.done=!0)})),a.setState({noteList:n}),sessionStorage.setItem("noteList",JSON.stringify(n)),y.a.post("https://qnote.qfstudio.net/api/note/completeTask",{noteID:e,token:t,username:a.state.user.username});break;default:console.log("\u672c\u5730\u7528\u6237\u5b8c\u6210\u4efb\u52a1");var s=a.state.noteList;s.forEach((function(t,n){t.noteID===e&&(t.done=!0)})),a.setState({noteList2:s}),localStorage.setItem("noteList",JSON.stringify(s))}},a.state={online:!1,noteList:[],info:"",user:{id:"string",username:"string",email:"string",noteNum:0,completeNoteNum:0,currentNoteNum:0,giveUpNoteNum:0}},a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){if(localStorage.getItem("token")){console.log("\u4e8b\u52a1\u5217\u8868-\u767b\u5f55\u72b6\u6001");var e=JSON.parse(sessionStorage.getItem("noteList")||"[]"),t=JSON.parse(sessionStorage.getItem("user")||"[]");this.setState({online:!0,noteList:e,user:t})}else{console.log("\u4e8b\u52a1\u5217\u8868-\u79bb\u7ebf\u72b6\u6001");var n=JSON.parse(localStorage.getItem("noteList")||"[]");this.setState({online:!1,noteList:n})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"notepad-wrapper"},s.a.createElement("header",null,s.a.createElement("input",{className:"note-input-bar",type:"text",placeholder:"\u8f93\u5165\u6807\u7b7e\u5185\u5bb9\u540e\u70b9\u51fb\u6309\u94ae\u6dfb\u52a0",value:this.state.info,onChange:this.handleChange.bind(this)}),s.a.createElement("button",{onClick:this.handleClick.bind(this)},s.a.createElement("i",{className:"iconfont icon-bianjibijishishouxie"}))),s.a.createElement("main",null,s.a.createElement("div",{className:"note-not"},s.a.createElement("span",null,"\u672a\u5b8c\u6210"),this.state.noteList.map((function(t,n){if(!1===t.done)return s.a.createElement("section",{className:"note-n",key:n},s.a.createElement("span",null,t.noteContent),s.a.createElement("div",{className:"tool"},s.a.createElement("i",{className:"iconfont icon-lujing",onClick:e.cNote.bind(e,t.noteID)}),s.a.createElement("i",{className:"iconfont icon-lajitong",onClick:e.gNote.bind(e,t.noteID)})))}))),s.a.createElement("div",{className:"note-done"},s.a.createElement("span",null,"\u5df2\u5b8c\u6210"),this.state.noteList.map((function(t,n){if(!1!==t.done)return s.a.createElement("section",{className:"note-c",key:n},s.a.createElement("span",null,t.noteContent),s.a.createElement("div",{className:"tool"},s.a.createElement("i",{className:"iconfont icon-lajitong",onClick:e.dNote.bind(e,t.noteID)})))})))))}}]),n}(s.a.Component),x=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={online:!1,motto:{hitokoto:"\u4f1a\u6709\u90a3\u4e48\u4e00\u5929",from_who:"",from:"\u539f\u521b"}},a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=this;y.a.get("https://qnote.qfstudio.net/api/motto").then((function(t){e.setState({motto:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"mottopad-wrapper"},s.a.createElement("div",{className:"motto-wrapper"},s.a.createElement("div",{className:"motto"})),s.a.createElement("div",{className:"tool"}),s.a.createElement("button",{className:"turn-to-collect"}))}}]),n}(s.a.Component);n(216);g.b.config({top:100,duration:1,maxCount:1,rtl:!1,getContainer:function(){return document.querySelector(".App")||document.head}});var j=function(e){Object(r.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={},a}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(m.a,null,s.a.createElement("nav",null,s.a.createElement("section",null,s.a.createElement("i",{className:"iconfont icon-daohanggerenzhongxin"}),s.a.createElement(m.b,{to:"/"},"QNote")),s.a.createElement("section",null,s.a.createElement("i",{className:"iconfont icon-bianjibijishishouxie"}),s.a.createElement(m.b,{to:"/note"},"\u4e8b\u52a1\u5217\u8868")),s.a.createElement("section",null,s.a.createElement("i",{className:"iconfont icon-icon-test"}),s.a.createElement(m.b,{onClick:function(){g.b.info("\u529f\u80fd\u7ef4\u62a4\u4e2d")}},"\u7eaa\u5ff5\u65e5")),s.a.createElement("section",null,s.a.createElement("i",{className:"iconfont icon-liuyan"}),s.a.createElement(m.b,{to:"./motto"},"\u7ecf\u5178\u8bed\u5f55"))),s.a.createElement("main",{className:"container"},s.a.createElement(p.a,{exact:!0,path:"/",component:_}),s.a.createElement(p.a,{path:"/note",component:L}),s.a.createElement(p.a,{path:"/motto",component:x}))))}}]),n}(s.a.Component);o.a.render(s.a.createElement(j,null),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.5f36f053.chunk.js.map